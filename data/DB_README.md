# üßò‚Äç‚ôÄÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –π–æ–≥–∞ –ø—Ä–∞–∫—Ç–∏–∫

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –π–æ–≥–∞ –ø—Ä–∞–∫—Ç–∏–∫ —Å YouTube, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤ –ø—Ä–æ–µ–∫—Ç YogaDailyBot.

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã

–¢–∞–±–ª–∏—Ü–∞ `yoga_practices` —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è:

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `id` | INTEGER | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø—Ä–∞–∫—Ç–∏–∫–∏ (–∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç) |
| `title` | TEXT | –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ |
| `video_url` | TEXT | –°—Å—ã–ª–∫–∞ –Ω–∞ YouTube –≤–∏–¥–µ–æ (—É–Ω–∏–∫–∞–ª—å–Ω–∞—è) |
| `duration_minutes` | INTEGER | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∏–¥–µ–æ –≤ –º–∏–Ω—É—Ç–∞—Ö |
| `channel_name` | TEXT | –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞ |
| `description` | TEXT | –û–ø–∏—Å–∞–Ω–∏–µ –≤–∏–¥–µ–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |
| `weekday` | INTEGER | –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ (1=–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, 7=–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ, NULL=–ª—é–±–æ–π –¥–µ–Ω—å) |
| `created_at` | TIMESTAMP | –î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ |
| `updated_at` | TIMESTAMP | –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

### üìÖ –î–Ω–∏ –Ω–µ–¥–µ–ª–∏

–ü–æ–ª–µ `weekday` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â—É—é –Ω—É–º–µ—Ä–∞—Ü–∏—é:
- `1` - –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫
- `2` - –í—Ç–æ—Ä–Ω–∏–∫
- `3` - –°—Ä–µ–¥–∞
- `4` - –ß–µ—Ç–≤–µ—Ä–≥
- `5` - –ü—è—Ç–Ω–∏—Ü–∞
- `6` - –°—É–±–±–æ—Ç–∞
- `7` - –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ
- `NULL` - –õ—é–±–æ–π –¥–µ–Ω—å (–ø—Ä–∞–∫—Ç–∏–∫–∞ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ª—é–±–æ–≥–æ –¥–Ω—è –Ω–µ–¥–µ–ª–∏)

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –º–æ–¥—É–ª—è `app.db`:

```python
from app.db import add_yoga_practice
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É–∂–µ —Å–æ–∑–¥–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
```

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

```python
from app.db import add_yoga_practice

success = add_yoga_practice(
    title="–£—Ç—Ä–µ–Ω–Ω—è—è –π–æ–≥–∞ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö",
    video_url="https://www.youtube.com/watch?v=abc123",
    duration_minutes=15,
    channel_name="Yoga with Adriene",
    description="–ü—Ä–æ—Å—Ç–∞—è —É—Ç—Ä–µ–Ω–Ω—è—è –ø—Ä–∞–∫—Ç–∏–∫–∞",
    weekday=1  # –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫
)
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∞–∫—Ç–∏–∫

```python
from app.db import (
    get_all_yoga_practices,
    get_yoga_practice_by_id,
    get_yoga_practice_by_url,
    get_yoga_practices_by_channel,
    get_yoga_practices_by_duration,
    get_yoga_practices_by_weekday,
    get_random_yoga_practice_by_weekday,
    search_yoga_practices,
    get_random_yoga_practice
)

# –í—Å–µ –ø—Ä–∞–∫—Ç–∏–∫–∏
practices = get_all_yoga_practices()

# –ü–æ ID
practice = get_yoga_practice_by_id(1)

# –ü–æ URL
practice = get_yoga_practice_by_url("https://www.youtube.com/watch?v=abc123")

# –ü–æ –∫–∞–Ω–∞–ª—É
practices = get_yoga_practices_by_channel("Yoga with Adriene")

# –ü–æ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–¥–æ 20 –º–∏–Ω—É—Ç)
practices = get_yoga_practices_by_duration(max_duration=20)

# –ü–æ –¥–Ω—é –Ω–µ–¥–µ–ª–∏ (–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫)
practices = get_yoga_practices_by_weekday(1)

# –°–ª—É—á–∞–π–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ –¥–ª—è –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞
practice = get_random_yoga_practice_by_weekday(1)

# –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É
practices = search_yoga_practices("—É—Ç—Ä–µ–Ω–Ω—è—è")

# –°–ª—É—á–∞–π–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞
practice = get_random_yoga_practice()
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

```python
from app.db import update_yoga_practice

success = update_yoga_practice(
    practice_id=1,
    title="–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ",
    description="–ù–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ",
    weekday=2  # –í—Ç–æ—Ä–Ω–∏–∫
)
```

#### –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

```python
from app.db import delete_yoga_practice

success = delete_yoga_practice(practice_id=1)
```

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```python
from app.db import get_practice_count, get_weekday_statistics

count = get_practice_count()
print(f"–í—Å–µ–≥–æ –ø—Ä–∞–∫—Ç–∏–∫: {count}")

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏
weekday_stats = get_weekday_statistics()
for day, count in weekday_stats.items():
    print(f"{day}: {count} –ø—Ä–∞–∫—Ç–∏–∫")
```

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏

```python
from app.db import (
    weekday_to_name, name_to_weekday, get_current_weekday
)

# –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –Ω–æ–º–µ—Ä–∞ –≤ –Ω–∞–∑–≤–∞–Ω–∏–µ
day_name = weekday_to_name(1)  # "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫"

# –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è –≤ –Ω–æ–º–µ—Ä
weekday_num = name_to_weekday("–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫")  # 1
weekday_num = name_to_weekday("–ø–Ω")  # 1

# –¢–µ–∫—É—â–∏–π –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏
current_day = get_current_weekday()  # 1-7
```

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π:

```bash
source venv/bin/activate
python test_yoga_db.py
```

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–∫—Ç–∏–∫:

```bash
source venv/bin/activate
python add_yoga_practice.py
```

## üìä –ò–Ω–¥–µ–∫—Å—ã

–î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ —Å–æ–∑–¥–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã:

- `idx_video_url` - –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ URL –≤–∏–¥–µ–æ
- `idx_channel_name` - –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –∫–∞–Ω–∞–ª—É
- `idx_duration` - –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- `idx_weekday` - –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –¥–Ω—é –Ω–µ–¥–µ–ª–∏

## üîí –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- URL –≤–∏–¥–µ–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º (–Ω–µ–ª—å–∑—è –¥–æ–±–∞–≤–∏—Ç—å –æ–¥–Ω–æ –≤–∏–¥–µ–æ –¥–≤–∞–∂–¥—ã)
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º
- –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ –∏ –∫–∞–Ω–∞–ª–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã
- –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 1 –¥–æ 7 (–∏–ª–∏ NULL)

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –±–æ—Ç–µ

### –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∞–∫—Ç–∏–∫–∏ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –¥–Ω—è –Ω–µ–¥–µ–ª–∏

```python
from app.db import get_random_yoga_practice_by_weekday, get_current_weekday, weekday_to_name

def send_todays_practice(chat_id):
    current_day = get_current_weekday()
    practice = get_random_yoga_practice_by_weekday(current_day)
    
    if practice:
        day_name = weekday_to_name(current_day)
        message = f"""
üßò‚Äç‚ôÄÔ∏è –ü—Ä–∞–∫—Ç–∏–∫–∞ –Ω–∞ {day_name}:

üìù {practice[1]}
‚è±Ô∏è {practice[3]} –º–∏–Ω—É—Ç
üì∫ {practice[4]}
üîó {practice[2]}
        """
        # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        bot.send_message(chat_id, message)
```

### –ü–æ–∏—Å–∫ –ø—Ä–∞–∫—Ç–∏–∫ –ø–æ –¥–Ω—é –Ω–µ–¥–µ–ª–∏

```python
from app.db import get_yoga_practices_by_weekday, weekday_to_name

def find_monday_practices():
    # –ü—Ä–∞–∫—Ç–∏–∫–∏ –¥–ª—è –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞
    practices = get_yoga_practices_by_weekday(1)
    return practices
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏

```python
from app.db import get_weekday_statistics

def show_weekday_stats():
    stats = get_weekday_statistics()
    message = "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏:\n"
    for day, count in stats.items():
        message += f"‚Ä¢ {day}: {count} –ø—Ä–∞–∫—Ç–∏–∫\n"
    return message
```

### –ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º

```python
from app.db import search_yoga_practices

def find_practices_by_keyword(keyword):
    practices = search_yoga_practices(keyword)
    return practices
```

## üéØ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –±–æ—Ç–æ–º

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –π–æ–≥–∞ –ø—Ä–∞–∫—Ç–∏–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞:

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—É –∂–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö SQLite (`data/yogadaily.db`)
- –°–ª–µ–¥—É–µ—Ç —Ç–µ–º –∂–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –°–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

## üîß –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –º–æ–∂–Ω–æ:

1. –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü—É `yoga_practices`
2. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `app/db.py`
3. –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –Ω–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
4. –î–æ–±–∞–≤–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã –≤ `test_yoga_db.py`

## üìÖ –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–∫—Ç–∏–∫

–ù–æ–≤–æ–µ –ø–æ–ª–µ `weekday` –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–∫—Ç–∏–∫–∏** –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏
- **–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞—Ç—å –ø—Ä–∞–∫—Ç–∏–∫–∏** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ –¥–Ω—è
- **–°–æ–∑–¥–∞–≤–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è** –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ** –ø—Ä–∞–∫—Ç–∏–∫ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏
- **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
